{% extends 'base.html.twig' %}

{% block title %}
    Doctogood | Doctor Home
{% endblock %}

{% block body %}
<section>
<h1 class="text-center" >Dr. {{ doctor.firstname }} {{ doctor.lastname }}</h1>
    <div class="w-25 m-auto text-center text-light">
        <a href="{{ path('patient_new', {'idDoc':doctor.id})  }}" class="btn btn-primary m-4">Add new patient</a>
    </div>
    <div class="w-50 m-auto">
        <h3 class="text-primary card-title text-center">
            List patient</h3>
        <table class="table-borderless table-striped w-100 moodAlert">
            <thead class="bg-primary text-light">
                <tr class="col-12">
                    <td class="text-center col-8">
                    </td>
                    <td class="text-center col-2">
                        MedicAlert
                    </td>
                    <td class="text-center col-2">
                        Mood'Alert
                    </td>
                </tr>
            </thead>
            <tbody>
            {% for patient in patients %}

            <tr class="text-center col-12 mx-2">
                <td><a href="{{ path('patientDetails', {'id':patient.id})  }}">{{ patient.firstname }} {{ patient.lastname }}</a></td>
                <td></td>
                <td class="d-flex justify-content-between">
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-7 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-6 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-5 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-4 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-3 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-2 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                    {% for moodday in patient.mooddays %}
                        {% if moodday.date.date|date("d-m-Y") == "now"|date_modify("-1 day")|date("d-m-Y") %}
                            {% if moodday.mood.name == '121' %}
                                <div class="bg-ech1"></div>
                            {% elseif moodday.mood.id == '122' %}
                                <div class="bg-ech2"></div>
                            {% elseif moodday.mood.id == '123' %}
                                <div class="bg-ech3"></div>
                            {% elseif moodday.mood.id == '124' %}
                                <div class="bg-ech4"></div>
                            {% elseif moodday.mood.id == '125' %}
                                <div class="bg-ech5"></div>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock %}
